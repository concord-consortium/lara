= nested_form_for @embeddable do |f|
  = f.error_messages
  = f.label 'Heading'
  = f.text_field :name
  = field_set_tag 'Prompt' do
    = f.text_area :prompt, :rows => 5, :class => 'wysiwyg'
  = field_set_tag 'Options' do
    .options
      %ul
        %li
          = f.check_box :multi_answer
          Allow multiple answers
        %li
          = f.check_box :show_as_menu
          Show as drop-down menu
        %li
          = f.check_box :custom
          Custom Feedback
        %li
          = f.check_box :enable_check_answer
          = t(:LET_USERS_CHECK_MC_ANSWERS)
        = render :partial => 'shared/edit_prediction', :locals => { :f => f }

  = field_set_tag 'Choices' do
    %ul
      - @embeddable.choices.each do |choice|
        = f.fields_for :choices, choice do |choice_form|
          %li
            Choice:
            = choice_form.text_field :choice
            Correct:
            = choice_form.check_box :is_correct
            = choice_form.link_to_remove "Delete"
          %li.custom-hidden{ :style => @embeddable.custom ? '' : 'display: none;' }
            Message:
            = choice_form.text_field :prompt
    = f.link_to_add "Add choice", :choices
    :javascript
      $(function() {
          $('.wysiwyg').wysiwyg({"controls": { "html": { "visible": true }, "h1": { "visible": false }, "h2": { "visible": false }, "h3": { "visible": false } } });
      });
  = f.submit "Cancel", :class => 'close'
  = f.submit "Save", :class => 'embeddable-save'
