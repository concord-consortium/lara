version: '2'
services:
  app:
    build:
      context: .
      dockerfile: Dockerfile-dev
    command: script/docker-app.sh
    environment:
      # you will need more variables here to connect your lara to a portal
      DB_HOST: db
      DB_USER: master
      DB_PASSWORD: master
      DB_NAME: lara
      SECRET_TOKEN: b30c94c7-81b7-4f20-8df9-686b079a616a
    ports:
      - "3000:3000"
    depends_on:
      - db
    volumes:
      - .:/lara
      - "bundle:/bundle"
  db:
    image: mysql:5.6
    environment:
      MYSQL_DATABASE: lara
      MYSQL_PASSWORD: master
      MYSQL_USER: master
      MYSQL_ROOT_PASSWORD: xyzzy
    command: mysqld --character-set-server=utf8 --collation-server=utf8_general_ci
volumes:
  bundle:
